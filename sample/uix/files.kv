#:kivy 1.9.1

# Copyright (C) 2017  Mariano Ramis

# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.


#:import env os.environ
#:import Factory kivy.factory.Factory

#:set small_icon_size (20, 20)
#:set large_icon_size (30, 30)
#:set small_font_size large_icon_size[0] * .35
#:set medium_font_size large_icon_size[0] * .45
#:set large_font_size large_icon_size[0] * .55

#:set fs_labels 12
#:set fs_titles 16

#:set dark_blue_color [c / 255. for c in (22, 38, 55, 255)]
#:set light_blue_color [c / 255. for c in(29, 50, 73, 255)]
#:set yellow_color [c / 255. for c in (241, 196, 15, 255)]

# <Filechooser@Popup>:
#     title: "Seleccione los archivos para procesar."
#     title_size: fs_titles
#     size_hint: None, None
#     size: 400, 300
#     separator_color: map(lambda x: x / 255., light_color) + [1]
#     BoxLayout:
#         FileChooserListView:
#             rootpath: env['HOME']
#         Button:
#             text: "Select"

<File@Button>:
    background_normal: "atlas://images/mm-atlas/file-normal"
    background_down: "atlas://images/mm-atlas/file-normal"
    border: (1, )*4
    pos_hint: {'center_x': .5}
    size_hint: (1, None)
    height: large_icon_size[0]
    font_size: medium_font_size
    Image:
        source: "atlas://images/mm-atlas/remove"
        size: small_icon_size
        scale: small_icon_size[0]
        x: root.x + root.width - self.scale
        y: root.y + (root.height - self.scale)*.5

<ClusterBox@BoxLayout>:
    orientation: 'vertical'
    pos_hint: {'center_x': .5}
    TextInput:
        multiline: False
        size_hint: 1, None
        height: large_icon_size[0]
        pos_hint: {'center_x': .5}
        font_size: medium_font_size
        background_color: dark_blue_color
        cursor_color: [1, 1, 1, .5]
        cursor_width: 2
        foreground_color: [1, 1, 1, .8]
        default_message: "*Escribe aqu√≠ el nombre del grupo.."
        text: self.default_message
    ScrollView:
        size_hint: (1, .7)
        GridLayout:
            cols: 1
            size_hint: (1, None)
            pos_hint: {'center_x': .5, 'center_y': .5}
            height: self.minimum_height
            padding: 5
            canvas:
                Color:
                    rgba: light_blue_color
                Rectangle:
                    pos: self.pos
                    size: self.size
            # File

<InputButtons@BoxLayout>:
    orientation: 'horizontal'
    pos_hint: {'center_x': .5}
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, None
        height: large_icon_size[0] * 2.
        Button:
            background_normal: "atlas://images/mm-atlas/open-file-normal"
            background_down: "atlas://images/mm-atlas/open-file-down"
            border: (1, )*4
            pos_hint: {'center_x': .5}
            size_hint: (None, None)
            size: large_icon_size
        Label:
            font_size: small_font_size
            text: "Buscar\nArchivos"
            color: yellow_color
            halign: 'center'
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, None
        height: large_icon_size[0] * 2.
        Button:
            background_normal: "atlas://images/mm-atlas/process-normal"
            background_down: "atlas://images/mm-atlas/process-down"
            border: (1, )*4
            pos_hint: {'center_x': .5}
            size_hint: (None, None)
            size: large_icon_size
        Label:
            font_size: small_font_size
            text: "Procesar\nGrupo"
            color: yellow_color
            halign: 'center'
    BoxLayout:
        orientation: 'vertical'
        size_hint: 1, None
        height: large_icon_size[0] * 2.
        Button:
            background_normal: "atlas://images/mm-atlas/new-group-normal"
            background_down: "atlas://images/mm-atlas/new-group-down"
            border: (1, )*4
            pos_hint: {'center_x': .5}
            size_hint: (None, None)
            size: large_icon_size
        Label:
            font_size: small_font_size
            text: "Renovar\nGrupo"
            color: yellow_color
            halign: 'center'

<Content>:
    size_hint: None, None
    size: 300, 300
    orientation: "vertical"
    padding: 20
    spacing: 10
    canvas:
        Color:
            rgba: dark_blue_color
        Rectangle:
            pos: self.pos
            size: self.size
    InputButtons:
        size_hint: 1, .3
    ClusterBox:
        size_hint: 1, .7

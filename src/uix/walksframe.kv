#:kivy 1.9.1

# Copyright (C) 2017  Mariano Ramis

# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

#:include src/uix/configwidgets.kv
#:set minheight 35


<WalksFrame>:
  rows: 4
  cols: 1
  name: "Caminata"
  walks: app.walks_container
  spacing: 0, 4
  rows_minimum: {1: 150}
  row_force_default:True
  row_default_height: minheight
  # Selección
  GridLayout:
    rows: 1
    cols: 5
    spacing: 4, 0
    Button:
      text: "Seleccionar"
      size_hint_x: 0.4
      on_release: root.show_selector()
    Button:
      text: "Atrás"
      size_hint_x: 0.2
      on_release: root.select_backward()
    Label:
      text: "Caminata:"
      size_hint_x: 0.2
    Label:
      id: show_walk
      valign: 'middle'
      halign: 'center'
      text_size: self.size
    Button:
      text: "Adelante"
      size_hint_x: 0.2
      on_release: root.select_forward()
  # Configuración
  GridLayout:
    rows: 2
    cols: 3
    FloatOption:
      label: u"Demora en reproducción"
      section_variable: "video-delay"
      option_values: [0, 0.15, 0.01]
    IntegerOption:
      id: startframe
      label: u"Cuadro incial"
      section_variable: "video-startframe"
      option_values: [0, 25000, 1]
    IntegerOption:
      id: endframe
      label: u"Cuadro final"
      section_variable: "video-endframe"
      option_values: [0, 25000, 1]
    IntegerOption:
      id: roiwidth
      label: u"Ancho de región"
      section_variable: "walk-roiwidth"
      option_values: [50, 250, 1]
    IntegerOption:
      id: roiheight
      label: u"Alto de región"
      section_variable: "walk-roiheight"
      option_values: [0, 50, 1]
    BoolOption:
      id: verify
      label: u"Verificar centro de regiones"
      section_variable: "walk-verify"
  # Procesamiento
  Button:
    text: "Procesar"
    on_release: root.process()
  # Visualizaión
  Button:
    text: "Visualizar"
    on_release: root.view(app.config)


<SelectionDialog>:
  walks: app.walks_container
  BoxLayout:
    pos: root.pos
    size: root.size
    orientation: "vertical"
    ScrollView:
      do_scroll_x: False
      GridLayout:
        id: stack
        cols: 1
        spacing: 4
        size_hint_y: None
        height: self.minimum_height


<WalkButton>:
  wid: None
  height: minheight
  size_hint_y: None
